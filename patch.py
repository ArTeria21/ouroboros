import os, pathlib, json, dateutil.parser; file_path = "ouroboros/consciousness.py"; content = open(file_path, "r", encoding="utf-8").read(); search = "    def _execute_tool(self, tc: Dict[str, Any], all_pending_events: List[Dict[str, Any]]) -> str:\n        \"\"\"Execute a consciousness tool call with timeout. Returns result string.\"\"\"\n        fn_name = tc.get(\"function\", {}).get(\"name\", \"\")\n        if fn_name not in self._BG_TOOL_WHITELIST:\n            return f\"Tool {fn_name} not available in background mode.\"\n"; replace = search + "        if fn_name == \"send_owner_message\":\n            import json, datetime, dateutil.parser\n            try:\n                state_path = self._drive_root / \"state\" / \"state.json\"\n                if state_path.exists():\n                    state_data = json.loads(state_path.read_text(encoding=\"utf-8\"))\n                    last_msg = state_data.get(\"last_owner_message_at\")\n                    if last_msg:\n                        last_time = dateutil.parser.isoparse(last_msg)\n                        now = datetime.datetime.now(datetime.timezone.utc)\n                        delta_min = (now - last_time).total_seconds() / 60\n                        if delta_min < 15:\n                            return f\"Error: User is currently active (last msg {delta_min:.1f}m ago). Do not interrupt.\"\n            except Exception:\n                pass\n"; new_content = content.replace(search, replace); print("Applied" if new_content != content else "Failed"); open(file_path, "w", encoding="utf-8").write(new_content) if new_content != content else None